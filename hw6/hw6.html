<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECE362 HW6 Study Animations</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="../animation-utils.js"></script>
</head>
<body>
    <div class="navbar">
        <a href="../index.html">Home</a>
        <a href="../hw2/hw2.html">HW2</a>
        <a href="../hw3/hw3.html">HW3</a>
        <a href="../hw4/hw4.html">HW4</a>
        <a href="../hw5/hw5.html">HW5</a>
        <a href="hw6.html">HW6</a>
    </div>
    <h1>ECE362 HW6 Study Animations</h1>
    <div class="content">
        <!-- Problem 1 -->
        <div class="section" id="spi-word-section">
            <h2>Problem 1: SPI Word Size</h2>
            <!-- NEW: Add SPI interactive control -->
            <div class="interactive-controls" id="spi-controls">
                <label>Word Size: <input type="number" id="spi-word-size" min="8" max="32" value="15"></label>
            </div>
            <div class="description">
                Given the <span class="tooltip" data-tooltip="Serial Peripheral Interface: A synchronous protocol using clock (SCK) and data (MOSI) lines.">SPI</span> signal below, find the <strong>word size</strong> in bits, read on <strong>rising edges</strong> of SCK. The signal has <strong>15 rising edges</strong>, indicating <strong>15 bits</strong>.
            </div>
            <div class="signal-container">
                <div class="signal-row">
                    <span class="signal-label">NSS</span>
                    <div class="signal-bits" id="spi-word-nss"></div>
                </div>
                <div class="signal-row">
                    <span class="signal-label">SCK</span>
                    <div class="signal-bits" id="spi-word-sck"></div>
                </div>
                <div class="signal-row">
                    <span class="signal-label">MOSI</span>
                    <div class="signal-bits" id="spi-word-mosi"></div>
                </div>
            </div>
            <div class="calculation-steps" id="spi-word-steps">
                <p>Count rising edges of SCK: 15</p>
                <p>Word size = 15 bits</p>
            </div>
            <div class="controls">
                <button id="spi-word-animate-btn">Animate</button>
                <button id="spi-word-steps-btn">Show Steps</button>
                <button id="spi-word-reset-btn">Reset</button>
            </div>
        </div>

        <!-- Problem 2 -->
        <div class="section" id="spi-value-section">
            <h2>Problem 2: SPI Transmitted Value</h2>
            <div class="description">
                For the same SPI signal (<strong>110001000010110</strong>), find the <strong>value transmitted</strong> (LSB first). The animation flips it to <strong>0x3423</strong>.
            </div>
            <div class="signal-container">
                <div class="signal-row">
                    <span class="signal-label">MOSI</span>
                    <div class="signal-bits" id="spi-value-mosi"></div>
                </div>
            </div>
            <div class="calculation-steps" id="spi-value-steps">
                <p>MOSI: 110001000010110</p>
                <p>Flip (LSB first): 0011010000010011</p>
                <p>Value = 0x3423</p>
            </div>
            <div class="controls">
                <button id="spi-value-animate-btn">Animate</button>
                <button id="spi-value-steps-btn">Show Steps</button>
                <button id="spi-value-reset-btn">Reset</button>
            </div>
        </div>

        <!-- Problem 3 -->
        <div class="section" id="uart-encode-section">
            <h2>Problem 3: UART Encoding</h2>
            <!-- NEW: Add UART interactive control -->
            <div class="interactive-controls" id="uart-controls">
                <label>Input Byte (Hex): <input type="text" id="uart-input-byte" value="53"></label>
            </div>
            <div class="description">
                Encode <strong>0x53</strong> for <span class="tooltip" data-tooltip="Universal Asynchronous Receiver/Transmitter: Sends data serially with start/stop bits.">UART</span> with 1 start bit, 8-bit word, no parity, 1 stop bit. The animation shows <strong>0110010101</strong>.
            </div>
            <div class="signal-container">
                <div class="signal-row">
                    <span class="signal-label">UART</span>
                    <div class="signal-bits" id="uart-encode-signal"></div>
                </div>
            </div>
            <div class="calculation-steps" id="uart-encode-steps">
                <p>Start Bit: 0</p>
                <p>Data (0x53 flipped): 11001010</p>
                <p>Stop Bit: 1</p>
                <p>Full Signal: 0110010101</p>
            </div>
            <div class="controls">
                <button id="uart-encode-animate-btn">Animate</button>
                <button id="uart-encode-steps-btn">Show Steps</button>
                <button id="uart-encode-reset-btn">Reset</button>
            </div>
        </div>

        <!-- Problem 4 -->
        <div class="section" id="uart-word-section">
            <h2>Problem 4: UART Decoded Word</h2>
            <div class="description">
                Decode an ASCII word from a UART signal (7-bit word, 1 parity, 1 stop). The animation shows the first frame (<strong>0100100110</strong>) for 'd', with steps for all ("desk").
            </div>
            <div class="signal-container">
                <div class="signal-row">
                    <span class="signal-label">UART</span>
                    <div class="signal-bits" id="uart-word-signal"></div>
                </div>
            </div>
            <div class="calculation-steps" id="uart-word-steps">
                <p>First: 0100100110 → 0010011 → 1100100 (0x64 = 'd')</p>
                <p>Second: 0100110110 → 1010011 → 1100101 (0x65 = 'e')</p>
                <p>Third: 0110101110 → 1101011 → 1110011 (0x73 = 's')</p>
                <p>Fourth: 0100111110 → 1111011 → 1101011 (0x6B = 'k')</p>
                <p>Word: "desk"</p>
            </div>
            <div class="controls">
                <button id="uart-word-animate-btn">Animate</button>
                <button id="uart-word-steps-btn">Show Steps</button>
                <button id="uart-word-reset-btn">Reset</button>
            </div>
        </div>

        <!-- Problem 5 -->
        <div class="section" id="parity-section">
            <h2>Problem 5: Odd Parity Meaning</h2>
            <div class="description">
                Define <strong>odd parity</strong> in UART. The animation shows a frame where the total number of 1s (data + parity) is odd, confirming option c.
            </div>
            <div class="signal-container">
                <div class="signal-row">
                    <span class="signal-label">Data</span>
                    <div class="signal-bits" id="parity-data"></div>
                </div>
            </div>
            <div class="calculation-steps" id="parity-steps">
                <p>Data: 10101010 (4 ones)</p>
                <p>Parity Bit: 1</p>
                <p>Total 1s: 5 (odd)</p>
            </div>
            <div class="controls">
                <button id="parity-animate-btn">Animate</button>
                <button id="parity-steps-btn">Show Steps</button>
                <button id="parity-reset-btn">Reset</button>
            </div>
        </div>

        <!-- Problem 6 -->
        <div class="section" id="baud-words-section">
            <h2>Problem 6: Words per Second</h2>
            <div class="description">
                Calculate <strong>useful words per second</strong> at 13540 baud with 1 start, 8 data, 1 stop bit. The animation simulates a frame, showing <strong>1354 words/s</strong>.
            </div>
            <div class="signal-container">
                <div class="signal-row">
                    <span class="signal-label">Frame</span>
                    <div class="signal-bits" id="baud-words-frame"></div>
                </div>
            </div>
            <div class="calculation-steps" id="baud-words-steps">
                <p>Total bits: 1 + 8 + 1 = 10</p>
                <p>Baud rate: 13540</p>
                <p>Words/s: 13540 / 10 = 1354</p>
            </div>
            <div class="controls">
                <button id="baud-words-animate-btn">Animate</button>
                <button id="baud-words-steps-btn">Show Steps</button>
                <button id="baud-words-reset-btn">Reset</button>
            </div>
        </div>

        <!-- Problem 7 -->
        <div class="section" id="baud-rate-section">
            <h2>Problem 7: UART Baud Rate</h2>
            <div class="description">
                Find the <strong>baud rate</strong> for a UART frame where 10 bits take 50 ms. The animation shows signal changes, yielding <strong>200 baud</strong>.
            </div>
            <div class="signal-container">
                <div class="signal-row">
                    <span class="signal-label">UART</span>
                    <div class="signal-bits" id="baud-rate-signal"></div>
                </div>
            </div>
            <div class="calculation-steps" id="baud-rate-steps">
                <p>10 bits in 50 ms</p>
                <p>Signal changes/s: 10 / 0.05 = 200</p>
            </div>
            <div class="controls">
                <button id="baud-rate-animate-btn">Animate</button>
                <button id="baud-rate-steps-btn">Show Steps</button>
                <button id="baud-rate-reset-btn">Reset</button>
            </div>
        </div>

        <!-- Problem 8 -->
        <div class="section" id="parity-error-section">
            <h2>Problem 8: Parity Error</h2>
            <div class="description">
                Identify a <strong>parity error</strong> in a UART frame. The animation shows a frame with even parity when odd parity is expected.
            </div>
            <div class="signal-container">
                <div class="signal-row">
                    <span class="signal-label">UART</span>
                    <div class="signal-bits" id="parity-error-signal"></div>
                </div>
            </div>
            <div class="calculation-steps" id="parity-error-steps">
                <p>Data: 10101010 (4 ones)</p>
                <p>Parity Bit: 0</p>
                <p>Total 1s: 4 (even)</p>
                <p>Expected: Odd parity (total should be odd)</p>
                <p>Result: Parity Error</p>
            </div>
            <div class="controls">
                <button id="parity-error-animate-btn">Animate</button>
                <button id="parity-error-steps-btn">Show Steps</button>
                <button id="parity-error-reset-btn">Reset</button>
            </div>
        </div>

        <!-- Problem 9 -->
        <div class="section" id="i2c-address-section">
            <h2>Problem 9: I2C Address</h2>
            <div class="description">
                Find the <strong>I2C address</strong> from a signal. The animation shows the address bits, yielding <strong>0x3A</strong>.
            </div>
            <div class="signal-container">
                <div class="signal-row">
                    <span class="signal-label">SDA</span>
                    <div class="signal-bits" id="i2c-address-sda"></div>
                </div>
            </div>
            <div class="calculation-steps" id="i2c-address-steps">
                <p>Address bits: 0111010</p>
                <p>R/W bit: 0 (write)</p>
                <p>7-bit address: 0x3A</p>
            </div>
            <div class="controls">
                <button id="i2c-address-animate-btn">Animate</button>
                <button id="i2c-address-steps-btn">Show Steps</button>
                <button id="i2c-address-reset-btn">Reset</button>
            </div>
        </div>

        <!-- Problem 10 -->
        <div class="section" id="i2c-ack-section">
            <h2>Problem 10: I2C ACK/NACK</h2>
            <!-- NEW: Add I2C interactive control -->
            <div class="interactive-controls" id="i2c-controls">
                <button id="simulate-i2c-error">Simulate Communication Error</button>
            </div>
            <div class="description">
                Explain <strong>ACK/NACK</strong> in I2C. The animation shows both signals, with ACK being a low bit and NACK being a high bit.
            </div>
            <div class="signal-container">
                <div class="signal-row">
                    <span class="signal-label">ACK</span>
                    <div class="signal-bits" id="i2c-ack-signal"></div>
                </div>
                <div class="signal-row">
                    <span class="signal-label">NACK</span>
                    <div class="signal-bits" id="i2c-nack-signal"></div>
                </div>
            </div>
            <div class="calculation-steps" id="i2c-ack-steps">
                <p>ACK: SDA pulled low</p>
                <p>NACK: SDA remains high</p>
            </div>
            <div class="controls">
                <button id="i2c-ack-animate-btn">Animate</button>
                <button id="i2c-ack-steps-btn">Show Steps</button>
                <button id="i2c-ack-reset-btn">Reset</button>
            </div>
        </div>

        <!-- NEW: I2C Configuration Section -->
        <div class="section" id="i2c-config-section">
            <h2>Problem ?: I2C Configuration</h2>
            <div class="description">
                This animation demonstrates I2C open-drain behavior.
            </div>
            <div id="i2c-config-sda"></div>  <!-- Added element for initI2cConfigAnimation -->
            <div class="controls">
                <button id="i2c-config-animate-btn">Animate</button>
                <button id="i2c-config-steps-btn">Show Steps</button>
                <button id="i2c-config-reset-btn">Reset</button>
            </div>
        </div>
    </div>
    <!-- Load utilities first -->
    <script src="../animation-utils.js"></script>
    <!-- Then load local script -->
    <script src="script.js"></script>
</body>
</html>